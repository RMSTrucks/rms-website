---
import Layout from '../layouts/Layout.astro';
import FAQSection from '../components/FAQSection.astro';
import FAQSchema from '../components/FAQSchema.astro';
import QuoteForm from '../components/QuoteForm.astro';
import states from '../data/states.json';

export function getStaticPaths() {
  return states.map(state => ({
    params: { slug: state.slug },
    props: { state }
  }));
}

const { state } = Astro.props;
---

<Layout title={state.meta.title} description={state.meta.description}>

  <!-- Schema Markup -->
  <script type="application/ld+json" slot="head" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "InsuranceAgency",
    "name": "RMS Truck Insurance",
    "description": `${state.name} trucking insurance specialists for owner-operators and new authorities`,
    "areaServed": { "@type": "State", "name": state.name },
    "telephone": "+1-208-800-0640",
    "url": `https://rmstruckers.com/trucking-insurance-${state.slug}/`,
    "knowsAbout": ["commercial trucking insurance", "new authority insurance", `${state.name} trucking`],
    "slogan": "Finally, someone on your side."
  })} />

  <!-- FAQ Schema -->
  <FAQSchema faqs={state.faqs} slot="head" />

  <!-- BreadcrumbList Schema -->
  <script type="application/ld+json" slot="head" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://rmstruckers.com/" },
      { "@type": "ListItem", "position": 2, "name": `${state.name} Trucking Insurance`, "item": `https://rmstruckers.com/trucking-insurance-${state.slug}/` }
    ]
  })} />

  <!-- HERO -->
  <section class="hero">
    <div class="hero-bg"></div>
    <div class="container hero-content">
      <div class="state-badge">
        <span class="state-flag" set:html={state.flag}></span>
        <span>Licensed in {state.name}</span>
      </div>

      <h1>{state.name} Trucking Insurance</h1>
      <p class="hero-tagline">{state.hero.tagline}</p>
      <p class="hero-sub">{state.hero.subtext}</p>

      <div class="trust-badges">
        {state.hero.badges.map(badge => (
          <div class="badge"><span class="badge-icon">&#10003;</span> {badge}</div>
        ))}
      </div>

      <a href="tel:208-800-0640" class="hero-cta">
        <span class="cta-label">Get Your {state.name} Quote</span>
        <span class="cta-number">208-800-0640</span>
      </a>

      <p class="hero-note">{state.hero.note}</p>
    </div>
  </section>

  <!-- REQUIREMENTS -->
  <section class="requirements">
    <div class="container">
      <div class="section-header">
        <span class="section-tag">What You Need</span>
        <h2>{state.name} Insurance Requirements</h2>
        <p class="section-intro">{state.name} has specific requirements depending on whether you're staying in-state or crossing state lines. Here's the quick breakdown:</p>
      </div>

      <div class="table-wrap">
        <table class="req-table">
          <thead>
            <tr>
              <th>Your Operation</th>
              <th>Minimum Liability</th>
              <th>What You Need</th>
            </tr>
          </thead>
          <tbody>
            {state.requirements.map(req => (
              <tr>
                <td>{req.operation}</td>
                <td><strong>{req.liability}</strong></td>
                <td>{req.authority}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <div class="section-cta">
        <p>Not sure which category you fall into? That's what we're here for. We'll figure out exactly what you need - no more, no less.</p>
        <a href="tel:208-800-0640" class="btn">Call 208-800-0640</a>
      </div>
    </div>
  </section>

  <!-- WHY RMS -->
  <section class="why-rms">
    <div class="container">
      <div class="section-header centered">
        <span class="section-tag">Why RMS</span>
        <h2>Why {state.name} Truckers Choose Us</h2>
      </div>

      <div class="problem-box">
        <p class="problem"><strong>The Problem:</strong> {state.whyRms.problem}</p>
        <p class="insight"><em>"{state.whyRms.insight}"</em></p>
      </div>

      <div class="value-grid">
        {state.whyRms.cards.map(card => (
          <div class={`value-card ${card.highlight ? 'highlight' : ''}`}>
            <h3>{card.title}</h3>
            <p>{card.text}</p>
          </div>
        ))}
      </div>

      <div class="section-cta centered">
        <a href="tel:208-800-0640" class="btn">Get Your {state.name} Quote</a>
      </div>
    </div>
  </section>

  <!-- STATE MARKET -->
  <section class="state-market">
    <div class="container">
      <div class="section-header">
        <span class="section-tag">The Market</span>
        <h2>{state.market.headline}</h2>
      </div>

      <div class="market-content">
        <div class="market-text">
          <p set:html={state.market.intro}></p>
          <ul>
            {state.market.stats.map(stat => (
              <li>{stat}</li>
            ))}
          </ul>
        </div>

        <div class="corridors">
          <h3>The Corridors That Matter</h3>
          <div class="corridor-list">
            {state.market.corridors.map(corridor => (
              <div class="corridor">
                <span class="corridor-name">{corridor.name}</span>
                <span class="corridor-route">{corridor.route}</span>
                <p>{corridor.description}</p>
              </div>
            ))}
          </div>
        </div>
      </div>

      <div class="section-cta">
        <p>{state.market.ctaText}</p>
        <a href="tel:208-800-0640" class="btn">Talk to a {state.name} Specialist</a>
      </div>
    </div>
  </section>

  <!-- NEW AUTHORITY PROCESS -->
  <section class="new-authority">
    <div class="container">
      <div class="section-header centered">
        <span class="section-tag">New Authorities</span>
        <h2>Starting a Trucking Company in {state.name}?</h2>
      </div>

      <div class="timeline">
        <div class="timeline-item">
          <span class="day">Day 1</span>
          <p>Apply for USDOT and MC numbers ($300 FMCSA fee)</p>
        </div>
        <div class="timeline-connector"></div>
        <div class="timeline-item">
          <span class="day">Days 1-17</span>
          <p>20-21 day waiting period begins</p>
        </div>
        <div class="timeline-connector"></div>
        <div class="timeline-item highlight">
          <span class="day">Day 18</span>
          <p>RMS binds your insurance, files your BMC-91 within 10 minutes</p>
        </div>
        <div class="timeline-connector"></div>
        <div class="timeline-item">
          <span class="day">Day 21</span>
          <p>Your authority goes active. You're legal to haul.</p>
        </div>
      </div>

      <div class="rms-difference">
        <h3>The RMS Difference</h3>
        <p>RMS Truck Insurance has done this 1,000+ times. We know exactly when to bind so you're not paying for insurance days you can't use, but your filings hit FMCSA in time.</p>
        <p><strong>{state.name}-specific:</strong> {state.newAuthority.stateSpecific}</p>
      </div>

      <div class="section-cta centered">
        <p>Starting a trucking company in {state.name}? Let's talk through your timeline.</p>
        <a href="tel:208-800-0640" class="btn">Call 208-800-0640</a>
      </div>
    </div>
  </section>

  <!-- COVERAGE OPTIONS -->
  <section class="coverage">
    <div class="container">
      <div class="section-header">
        <span class="section-tag">Coverage</span>
        <h2>What {state.name} Truckers Typically Need</h2>
      </div>

      <div class="coverage-grid">
        {state.coverage.map(cov => (
          <div class={`coverage-card ${cov.required ? 'required' : ''}`}>
            <span class="coverage-badge">{cov.badge}</span>
            <h3>{cov.name}</h3>
            <p>{cov.text}</p>
          </div>
        ))}
      </div>

      <div class="coverage-approach">
        <p><strong>Our approach:</strong> RMS Truck Insurance doesn't upsell coverage you don't need. We figure out what's required, what's smart, and what's optional - then let you decide.</p>
        <p class="carriers">Carriers we work with: Progressive, NICO, BHHC, GEICO, Canal</p>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <FAQSection faqs={state.faqs} title={`${state.name} Trucking Insurance Questions`} />

  <!-- QUOTE FORM -->
  <QuoteForm state={state.name} title={`Get Your ${state.name} Trucking Insurance Quote`} />

  <!-- OTHER STATES -->
  <section class="other-states">
    <div class="container">
      <div class="section-header centered">
        <span class="section-tag">Also Serving</span>
        <h2>Trucking Insurance in Other States</h2>
      </div>
      <div class="states-grid">
        {state.otherStates.map(slug => {
          const other = states.find(s => s.slug === slug);
          return other && (
            <a href={`/trucking-insurance-${other.slug}/`} class="state-link">{other.name}</a>
          );
        })}
      </div>
      <p class="states-note">{state.statesGridIntro} <a href="/">See all coverage areas</a></p>
    </div>
  </section>

  <!-- FINAL CTA -->
  <section class="final-cta">
    <div class="container">
      <h2>Ready to Get Your {state.name} Trucking Insurance?</h2>
      <p>Whether you're a new authority waiting on FMCSA or an established owner-operator shopping rates, RMS is here to help.</p>

      <div class="cta-options">
        <a href="tel:208-800-0640" class="cta-phone">
          <span class="cta-type">Call</span>
          <span class="cta-value">208-800-0640</span>
        </a>
        <a href="sms:208-800-0644" class="cta-text">
          <span class="cta-type">Text</span>
          <span class="cta-value">208-800-0644</span>
        </a>
      </div>

      <p class="trust-close">1,000+ truckers helped. Licensed in 40 states. Trucking specialists since 2020.</p>
    </div>
  </section>

  <!-- MOBILE STICKY -->
  <div class="mobile-cta">
    <a href="tel:208-800-0640" class="mobile-btn">Get {state.name} Quote - 208-800-0640</a>
  </div>

</Layout>

<style>
  :root {
    --forest: #1B4332;
    --forest-deep: #0D2118;
    --gold: #DAA520;
    --gold-hover: #C49B1A;
    --white: #ffffff;
    --gray-100: #f7f7f7;
    --gray-200: #e5e5e5;
    --gray-600: #6b7280;
    --text: #1f2937;
  }

  .container { max-width: 1100px; margin: 0 auto; padding: 0 2rem; }

  .section-tag {
    display: inline-block; font-size: 0.75rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.1em; color: var(--gold); margin-bottom: 0.75rem;
  }

  .section-header { margin-bottom: 2.5rem; }
  .section-header.centered { text-align: center; }
  .section-header h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); line-height: 1.15; margin-bottom: 0.75rem; color: var(--forest); }
  .section-intro { font-size: 1.05rem; color: var(--gray-600); line-height: 1.7; max-width: 700px; }

  .btn {
    display: inline-block; background: var(--gold); color: var(--forest-deep);
    padding: 14px 28px; border-radius: 4px; font-weight: 600; text-decoration: none; transition: all 0.2s;
  }
  .btn:hover { background: var(--forest); color: var(--white); }

  .section-cta { margin-top: 2.5rem; padding: 2rem; background: var(--gray-100); border-radius: 8px; border-left: 4px solid var(--gold); }
  .section-cta.centered { text-align: center; border-left: none; border-top: 4px solid var(--gold); }
  .section-cta p { margin-bottom: 1rem; color: var(--text); }

  /* HERO */
  .hero { position: relative; padding: 7rem 2rem 5rem; text-align: center; color: var(--white); }
  .hero-bg { position: absolute; inset: 0; background: var(--forest-deep); z-index: 0; }
  .hero-content { position: relative; z-index: 1; max-width: 800px; margin: 0 auto; }

  .state-badge {
    display: inline-flex; align-items: center; gap: 8px;
    background: rgba(218,165,32,0.15); border: 1px solid rgba(218,165,32,0.3);
    padding: 8px 16px; border-radius: 50px; font-size: 0.7rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.08em; color: var(--gold); margin-bottom: 1.5rem;
  }
  .state-flag { font-size: 1rem; }
  .hero h1 { font-size: clamp(2.25rem, 6vw, 3.5rem); margin-bottom: 0.25rem; }
  .hero-tagline { font-size: 1.1rem; color: var(--gold); margin-bottom: 1.5rem; font-weight: 500; }
  .hero-sub { font-size: 1.1rem; opacity: 0.85; line-height: 1.6; margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto; }

  .trust-badges { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; margin-bottom: 2rem; }
  .badge { display: flex; align-items: center; gap: 6px; font-size: 0.8rem; opacity: 0.8; }
  .badge-icon { color: var(--gold); font-weight: bold; }

  .hero-cta {
    display: inline-flex; flex-direction: column; align-items: center;
    background: var(--gold); color: var(--forest-deep); padding: 1.25rem 3rem;
    border-radius: 4px; text-decoration: none; transition: all 0.2s; margin-bottom: 1rem;
  }
  .hero-cta:hover { background: var(--white); transform: translateY(-2px); }
  .cta-label { font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.7; margin-bottom: 2px; }
  .cta-number { font-family: 'Crimson Pro', serif; font-size: 1.6rem; font-weight: 600; }
  .hero-note { font-size: 0.9rem; opacity: 0.7; font-style: italic; }

  /* REQUIREMENTS */
  .requirements { padding: 5rem 0; background: var(--white); }
  .table-wrap { overflow-x: auto; }
  .req-table { width: 100%; border-collapse: collapse; }
  .req-table th, .req-table td { padding: 1rem 1.25rem; text-align: left; border-bottom: 1px solid var(--gray-200); }
  .req-table th { background: var(--forest); color: var(--white); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; }
  .req-table th:first-child { border-radius: 4px 0 0 0; }
  .req-table th:last-child { border-radius: 0 4px 0 0; }
  .req-table td { background: var(--gray-100); }

  /* WHY RMS */
  .why-rms { padding: 5rem 0; background: var(--gray-100); }
  .problem-box { background: var(--white); padding: 2rem; border-radius: 8px; margin-bottom: 2.5rem; text-align: center; }
  .problem { margin-bottom: 1rem; color: var(--text); }
  .insight { font-family: 'Crimson Pro', serif; font-size: 1.4rem; color: var(--forest); }

  .value-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.25rem; }
  .value-card { background: var(--white); padding: 1.5rem; border-radius: 8px; border: 1px solid var(--gray-200); }
  .value-card.highlight { background: var(--forest); border-color: var(--forest); }
  .value-card.highlight h3, .value-card.highlight p { color: var(--white); }
  .value-card.highlight h3 { color: var(--gold); }
  .value-card h3 { font-family: 'Crimson Pro', serif; font-size: 1.15rem; color: var(--forest); margin-bottom: 0.5rem; }
  .value-card p { color: var(--gray-600); font-size: 0.9rem; line-height: 1.6; margin: 0; }

  /* STATE MARKET */
  .state-market { padding: 5rem 0; background: var(--forest-deep); color: var(--white); }
  .state-market .section-header h2 { color: var(--white); }
  .market-content { display: grid; grid-template-columns: 1fr 1.5fr; gap: 3rem; margin-bottom: 2rem; }
  .market-text p { margin-bottom: 1rem; }
  .market-text ul { padding-left: 1.25rem; }
  .market-text li { margin-bottom: 0.5rem; opacity: 0.85; }
  .corridors h3 { font-family: 'Crimson Pro', serif; color: var(--gold); margin-bottom: 1rem; }
  .corridor-list { display: flex; flex-direction: column; gap: 1rem; }
  .corridor { background: rgba(255,255,255,0.05); padding: 1rem 1.25rem; border-radius: 6px; border-left: 3px solid var(--gold); }
  .corridor-name { font-family: 'Crimson Pro', serif; font-size: 1.25rem; font-weight: 600; }
  .corridor-route { display: block; font-size: 0.8rem; color: var(--gold); margin-bottom: 0.5rem; }
  .corridor p { font-size: 0.9rem; opacity: 0.8; margin: 0; }
  .state-market .section-cta { background: rgba(255,255,255,0.05); border-color: var(--gold); }
  .state-market .section-cta p { color: rgba(255,255,255,0.9); }

  /* NEW AUTHORITY */
  .new-authority { padding: 5rem 0; background: var(--white); }
  .timeline { display: flex; align-items: center; justify-content: center; gap: 0; margin-bottom: 2.5rem; flex-wrap: wrap; }
  .timeline-item { text-align: center; padding: 1.5rem; background: var(--gray-100); border-radius: 8px; max-width: 180px; }
  .timeline-item.highlight { background: var(--gold); }
  .timeline-item.highlight .day { color: var(--forest-deep); }
  .timeline-item.highlight p { color: var(--forest-deep); }
  .day { display: block; font-family: 'Crimson Pro', serif; font-size: 1.1rem; font-weight: 600; color: var(--gold); margin-bottom: 0.5rem; }
  .timeline-item p { font-size: 0.85rem; color: var(--gray-600); margin: 0; line-height: 1.5; }
  .timeline-connector { width: 40px; height: 2px; background: var(--gray-200); }
  .rms-difference { background: var(--gray-100); padding: 2rem; border-radius: 8px; max-width: 700px; margin: 0 auto 2rem; }
  .rms-difference h3 { font-family: 'Crimson Pro', serif; color: var(--forest); margin-bottom: 1rem; }
  .rms-difference p { color: var(--gray-600); line-height: 1.7; margin-bottom: 0.75rem; }

  /* COVERAGE */
  .coverage { padding: 5rem 0; background: var(--gray-100); }
  .coverage-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; }
  .coverage-card { background: var(--white); padding: 1.25rem; border-radius: 8px; border: 1px solid var(--gray-200); }
  .coverage-card.required { border-color: var(--gold); border-width: 2px; }
  .coverage-badge { display: inline-block; font-size: 0.6rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--gray-600); background: var(--gray-100); padding: 3px 8px; border-radius: 4px; margin-bottom: 0.5rem; }
  .coverage-card.required .coverage-badge { background: rgba(218,165,32,0.2); color: var(--gold-hover); }
  .coverage-card h3 { font-family: 'Crimson Pro', serif; font-size: 1rem; color: var(--forest); margin-bottom: 0.4rem; }
  .coverage-card p { font-size: 0.8rem; color: var(--gray-600); line-height: 1.5; margin: 0; }
  .coverage-approach { margin-top: 2rem; text-align: center; }
  .coverage-approach p { color: var(--text); margin-bottom: 0.5rem; }
  .carriers { font-size: 0.85rem; color: var(--gray-600); }

  /* FAQ (component styles) */
  :global(.faq) { padding: 5rem 0; background: var(--white); }
  :global(.faq-layout) { display: grid; grid-template-columns: 1fr 2fr; gap: 3rem; }
  :global(.faq-header h2) { color: var(--forest); }
  :global(.faq-list) { display: flex; flex-direction: column; }
  :global(.faq-category) { font-family: 'Crimson Pro', serif; font-size: 1.1rem; color: var(--forest); margin-top: 1.5rem; margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--gold); }
  :global(.faq-category:first-child) { margin-top: 0; }
  :global(.faq-item) { border-bottom: 1px solid var(--gray-200); }
  :global(.faq-item:first-child), :global(.faq-category + .faq-item) { border-top: 1px solid var(--gray-200); }
  :global(.faq-item summary) { padding: 1.25rem 0; cursor: pointer; font-family: 'Crimson Pro', serif; font-size: 1.05rem; color: var(--forest); list-style: none; }
  :global(.faq-item summary::-webkit-details-marker) { display: none; }
  :global(.faq-item summary:hover) { color: var(--gold-hover); }
  :global(.faq-item[open] summary) { color: var(--gold-hover); }
  :global(.faq-item p) { padding: 0 0 1.25rem; color: var(--gray-600); line-height: 1.7; }

  /* FINAL CTA */
  .final-cta { padding: 5rem 0; background: var(--gold); text-align: center; }
  .final-cta h2 { color: var(--forest); margin-bottom: 0.5rem; }
  .final-cta > .container > p { color: var(--forest); opacity: 0.85; margin-bottom: 2rem; max-width: 500px; margin-left: auto; margin-right: auto; }
  .cta-options { display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem; }
  .cta-phone, .cta-text { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--forest); }
  .cta-type { font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.7; }
  .cta-value { font-family: 'Crimson Pro', serif; font-size: 2rem; font-weight: 600; }
  .cta-phone:hover .cta-value, .cta-text:hover .cta-value { color: var(--white); }
  .trust-close { font-size: 0.9rem; color: var(--forest); opacity: 0.75; }

  /* OTHER STATES */
  .other-states { padding: 4rem 0; background: var(--gray-100); }
  .other-states .section-header h2 { color: var(--forest); font-size: clamp(1.5rem, 3vw, 2rem); }
  .states-grid { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
  .state-link { display: inline-block; padding: 0.75rem 1.5rem; background: var(--white); border: 1px solid var(--gray-200); border-radius: 6px; color: var(--forest); font-weight: 500; text-decoration: none; transition: all 0.2s; }
  .state-link:hover { border-color: var(--gold); color: var(--gold-hover); transform: translateY(-1px); }
  .states-note { text-align: center; font-size: 0.9rem; color: var(--gray-600); }
  .states-note a { color: var(--gold-hover); font-weight: 500; }

  /* MOBILE */
  .mobile-cta { display: none; position: fixed; bottom: 0; left: 0; right: 0; padding: 1rem; background: var(--forest); z-index: 999; }
  .mobile-btn { display: block; width: 100%; padding: 14px; background: var(--gold); color: var(--forest); font-weight: 600; text-align: center; border-radius: 4px; text-decoration: none; }

  @media (max-width: 968px) {
    .value-grid { grid-template-columns: repeat(2, 1fr); }
    .coverage-grid { grid-template-columns: repeat(2, 1fr); }
    .market-content { grid-template-columns: 1fr; }
    :global(.faq-layout) { grid-template-columns: 1fr; gap: 2rem; }
    .timeline { flex-direction: column; }
    .timeline-connector { width: 2px; height: 20px; }
    .mobile-cta { display: block; }
    .final-cta { padding-bottom: 7rem; }
  }

  @media (max-width: 640px) {
    .value-grid { grid-template-columns: 1fr; }
    .coverage-grid { grid-template-columns: 1fr; }
    .trust-badges { flex-direction: column; align-items: center; }
    .cta-options { flex-direction: column; gap: 1rem; }
  }
</style>
